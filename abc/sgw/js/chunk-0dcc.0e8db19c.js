(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0dcc"],{1103:function(e,t,a){"use strict";a.r(t);var i=a("a794").a,n=(a("5e79"),a("2877")),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",{attrs:{filename:t.filename}},[a("template",{slot:"header"},[a("mg-breadcrumb")],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-container d2-clearfix report-slider",attrs:{"element-loading-text":"数据加载中..."}},[t.filterShow?a("div",{staticClass:"filter-container"},[a("i",{staticClass:"icon el-icon-close filter-close-btn",attrs:{title:"关闭筛选"},on:{click:function(e){t.filterShow=!1}}}),a("el-form",{ref:"formFilter",staticClass:"filter-container",attrs:{inline:!0,model:t.overviewFilter,size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"日期范围"}},[a("el-date-picker",{attrs:{size:"medium",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,clearable:!1,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":t.pickerOptionsDay},model:{value:t.overviewFilter.date,callback:function(e){t.$set(t.overviewFilter,"date",e)},expression:"overviewFilter.date"}})],1),a("el-form-item",{attrs:{label:"域"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择域名"},model:{value:t.overviewFilter.domain,callback:function(e){t.$set(t.overviewFilter,"domain",e)},expression:"overviewFilter.domain"}},t._l(t.domainList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSearch}},[t._v("查询")])],1)],1)],1):t._e(),a("div",{staticClass:"request-total"},[a("i",{staticClass:"icon el-icon-s-operation filter-toggle-btn",attrs:{title:"打开筛选"},on:{click:function(e){t.filterShow=!t.filterShow}}}),a("div",{staticClass:"request-total-item"},[a("d2-count-up",{staticClass:"request-total-number",staticStyle:{color:"#19d4ae"},attrs:{end:t.regNum.totalReq}}),a("div",{staticClass:"request-total-text"},[t._v("总请求量")])],1),a("div",{staticClass:"request-total-item"},[a("d2-count-up",{staticClass:"request-total-number",staticStyle:{color:"#5ab1ef"},attrs:{end:t.regNum.normalReq}}),a("div",{staticClass:"request-total-text"},[t._v("正常请求量")])],1),a("div",{staticClass:"request-total-item"},[a("d2-count-up",{staticClass:"request-total-number",staticStyle:{color:"#ff7993"},attrs:{end:t.regNum.exceptionReq}}),a("div",{staticClass:"request-total-text"},[t._v("规则触碰量")])],1),a("div",{staticClass:"request-total-item"},[a("d2-count-up",{staticClass:"request-total-number",staticStyle:{color:"#ffb980"},attrs:{end:t.regNum.whiteListReq}}),a("div",{staticClass:"request-total-text"},[t._v("白名单量")])],1)]),a("div",{staticClass:"map-container"},[a("province-modal",{attrs:{mapData:t.mapData}})],1),a("div",{staticClass:"pie-container"},[a("div",{staticClass:"pie-container-item"},[a("pie-modal",{attrs:{title:t.exceptionTitle,legendData:t.exceptionLegendData,pieData:t.exceptionPieData}})],1),a("div",{staticClass:"pie-container-item"},[a("pie-modal",{attrs:{title:t.automationTitle,legendData:t.automationLegendData,pieData:t.automationPieData}})],1)])])],2)},[],!1,null,"420cb138",null);o.options.__file="index.vue";t.default=o.exports},"5e79":function(e,t,a){"use strict";var i=a("d361");a.n(i).a},"943e":function(e,t,a){"use strict";a("7f7f");var i=a("313e"),n=a.n(i),o=a("c276"),r={props:{title:String,legendData:Array,pieData:Array},data:function(){return{chart:void 0,id:Math.floor(1e5*Math.random())}},methods:{renderChart:function(){this.chart=n.a.init(document.querySelector("#echartsPie".concat(this.id))),this.chart.setOption({title:{text:this.title,left:"center"},tooltip:{trigger:"item",formatter:function(e){return"".concat(e.name,": ").concat(o.a.number.format(e.value)," (").concat(e.percent,"%)")}},legend:{bottom:0,left:"center",data:this.legendData},series:[{type:"pie",radius:"45%",center:["50%","50%"],selectedMode:"single",data:this.pieData}]})}},watch:{pieData:{handler:function(e,t){var a=this;this.$nextTick(function(){a.renderChart()})},deep:!0}},mounted:function(){this.renderChart()}},c=a("2877"),s=Object(c.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticStyle:{height:"400px"},attrs:{id:"echartsPie"+e.id}})},[],!1,null,null,null);s.options.__file="PieModal.vue";t.a=s.exports},a794:function(e,o,r){"use strict";(function(e){r("7f7f"),r("a481"),r("456d"),r("ac6a");var t=r("bac6"),a=r("943e"),i=r("c276"),n=r("948c");o.a={name:"LoggerIndex",components:{ProvinceModal:t.a,PieModal:a.a},mixins:[],data:function(){return{filename:e,loading:!1,filterShow:!1,overviewFilter:{date:[],domain:[]},pickerOptionsDay:{disabledDate:function(e){return e.getTime()>(new Date).getTime()||e.getTime()<new Date("2017/01/01").getTime()},onPick:function(e){var t=e.maxDate,a=e.minDate;2592e6<t-a&&(this.$message({message:"日期跨度不能超过".concat(31,"天"),type:"warning"}),a.setTime(null),t.setTime(null))}},regNum:{totalReq:0,normalReq:0,exceptionReq:0,whiteListReq:0},min:0,max:2e4,mapData:[],exceptionTitle:"规则类型占比",exceptionLegendData:[],exceptionPieData:[],automationTitle:"自动化工具占比",automationLegendData:[],automationPieData:[]}},computed:{domainList:function(){return this.$store.getters["logger/filter/domainList"]}},created:function(){this.$store.dispatch("logger/filter/getDomainEntryMapping")},mounted:function(){this.initDate(),this.getDashboards()},watch:{},methods:{initDate:function(){this.overviewFilter.date.push(i.a.date.getCurrentMonth()+"-01"),this.overviewFilter.date.push(i.a.date.formatDate((new Date).getTime(),"yyyy-MM-dd"))},getDashboards:function(){var a=this,e={fromDate:this.overviewFilter.date[0],toDate:this.overviewFilter.date[1],domain:this.overviewFilter.domain};this.loading=!0,Object(n.f)(e).then(function(t){a.loading=!1,Object.keys(a.regNum).forEach(function(e){a.regNum[e]=t[e]}),a.mapData=t.regionReqList.map(function(e){return e.name=e.name.replace(/(省|自治区|壮族|回族|维吾尔|特别行政区)/g,""),e}),a.exceptionLegendData=t.exceptionPercent&&t.exceptionPercent.map(function(e){return e.name}),a.exceptionPieData=t.exceptionPercent,a.automationLegendData=t.toolsPercent&&t.toolsPercent.map(function(e){return e.name}),a.automationPieData=t.toolsPercent}).catch(function(e){a.loading=!1,a.$message.error(e.msg)})},handleSearch:function(){this.getDashboards()}}}}).call(this,"src\\pages\\logger-report\\logger\\index.vue?vue&type=script&lang=js&")},bac6:function(e,t,a){"use strict";a("28a5"),a("7f7f"),a("7514"),a("c5f6"),a("55dd");var i=a("313e"),n=a.n(i),o=a("948c"),r=a("c276"),c={props:{mapData:Array},data:function(){return{chart:void 0,provinceNameList:[{name:"安徽",code:"Anhui"},{name:"浙江",code:"Zhejiang"},{name:"江西",code:"Jiangxi"},{name:"江苏",code:"Jiangsu"},{name:"吉林",code:"Jilin"},{name:"青海",code:"Qinghai"},{name:"福建",code:"Fujian"},{name:"黑龙江",code:"Heilongjiang"},{name:"河南",code:"Henan"},{name:"河北",code:"Hebei"},{name:"湖南",code:"Hunan"},{name:"湖北",code:"Hubei"},{name:"新疆",code:"Xinjiang"},{name:"西藏",code:"Xizang"},{name:"甘肃",code:"Gansu"},{name:"广西",code:"Guangxi"},{name:"贵州",code:"Guizhou"},{name:"辽宁",code:"Liaoning"},{name:"内蒙古",code:"Nei Mongol"},{name:"宁夏",code:"Ningxia"},{name:"北京",code:"Beijing"},{name:"上海",code:"Shanghai"},{name:"山西",code:"Shanxi"},{name:"山东",code:"Shandong"},{name:"陕西",code:"Shaanxi"},{name:"天津",code:"Tianjin"},{name:"云南",code:"Yunnan"},{name:"广东",code:"Guangdong"},{name:"海南",code:"Hainan"},{name:"四川",code:"Sichuan"},{name:"重庆",code:"Chongqing"}]}},computed:{min:function(){return 0},max:function(){var e=this.mapData.map(function(e){return e.value}).sort(function(e,t){return t-e})[0],t=(Number(String(e)[0])+1)*Math.pow(10,String(e).length-1);return t}},methods:{renderMap:function(){this.chart=n.a.init(document.querySelector("#echartsMap")),Object(o.e)().then(function(e){n.a.registerMap("china",e)})},renderChart:function(){var e,a=this;this.chart.setOption({tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,formatter:function(e){var t=(e.value+"").split(".");return t="NaN"===(t=r.a.number.format(t[0]))?0:t,e.name+": "+t}},visualMap:{min:this.min,max:this.max||1e4,text:["高","低"],realtime:!1,calculable:!0,inRange:{color:["lightskyblue","yellow","orangered"]}},series:[{name:"中国",type:"map",mapType:"china",zoom:1.2,itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:(e=this.mapData,e.map(function(t){var e=a.provinceNameList.find(function(e){return e.code.toLowerCase()===t.name.toLowerCase()});return{name:e?e.name:null,value:t.value}}))}]})}},watch:{mapData:{handler:function(e,t){var a=this;this.$nextTick(function(){a.renderChart()})},deep:!0}},mounted:function(){this.renderMap(),this.renderChart()}},s=a("2877"),l=Object(s.a)(c,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{height:"600px"},attrs:{id:"echartsMap"}})},[],!1,null,null,null);l.options.__file="ProvinceModal.vue";t.a=l.exports},d361:function(e,t,a){}}]);